{% extends "layout.html" %}
{% block content %}
  <section class="card">
    <div class="card-header">
      <h2>ðŸ“Š KPI Dashboard</h2>
      <div class="button-row">
        <button
          class="button secondary"
          hx-get="/ui/kpi/_table"
          hx-target="#metrics-table"
          hx-swap="outerHTML"
        >
          Refresh
        </button>
      </div>
    </div>
    <p class="muted">MVP table view of daily action KPIs. Charts will be added later.</p>
    {% from "partials/filters_bar.html" import filter_bar %}
    {% call(section) filter_bar("/ui/kpi", "#metrics-table", "/ui/kpi/_table") %}
      {% if section == 'primary' %}
        <label>
          From
          <input type="date" name="from" value="{{ filters.from }}" />
        </label>
        <label>
          To
          <input type="date" name="to" value="{{ filters.to }}" />
        </label>
      {% else %}
        <div class="form-actions form-actions-end">
          <button class="button" type="submit">Apply filters</button>
        </div>
      {% endif %}
    {% endcall %}
    {% include "partials/metrics_table.html" %}
    <p class="muted">TODO: add Chart.js/Plotly trend charts and axis formatting.</p>
  </section>
{% endblock %}
